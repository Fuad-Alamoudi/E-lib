function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}define(function(){"use strict";return function(){function e(){_classCallCheck(this,e),this.sideMenuContainer=document.querySelector(".side-menu"),this.sideMenuInner=this.sideMenuContainer.querySelector(".side-menu__inner"),this.subMenuOverlay=this.sideMenuContainer.querySelector(".side-menu__overlay"),this.menuTrigger=_toConsumableArray(this.sideMenuContainer.querySelectorAll(".side-menu__trigger")),this.menuContent=this.sideMenuContainer.querySelector(".side-menu__content"),this.menuItem=_toConsumableArray(this.sideMenuContainer.querySelectorAll(".list--parent > .list__link")),this.menuBack=_toConsumableArray(this.sideMenuContainer.querySelectorAll(".list__back")),this.menuItemOpenClass="list__link--sub-open",this.noScrollClass="no-scroll",this.subMenuOffset=0,this.isRTL=document.querySelector("body").classList.contains("rtl"),this.transitionEndEvent="transitionend",this.init()}return _createClass(e,[{key:"getSubmenuHeight",value:function(e){return _toConsumableArray(e.children).map(function(e){return e.clientHeight}).reduce(function(e,n){return e+n},0)+"px"}},{key:"toggleSideMenu",value:function(){this.sideMenuContainer.classList.toggle("side-menu--is-open"),this.sideMenuContainer.classList.contains("side-menu--is-open")?document.body.classList.add(this.noScrollClass):(document.body.classList.remove(this.noScrollClass),this.subMenuOffset=0,this.translateX())}},{key:"translateX",value:function(){this.isRTL&&(this.subMenuOffset=-this.subMenuOffset),this.sideMenuInner.style.webkitTransform="translateX(".concat(this.subMenuOffset,"%)"),this.sideMenuInner.style.MozTransform="translateX(".concat(this.subMenuOffset,"%)"),this.sideMenuInner.style.msTransform="translateX(".concat(this.subMenuOffset,"%)"),this.sideMenuInner.style.OTransform="translateX(".concat(this.subMenuOffset,"%)"),this.sideMenuInner.style.transform="translateX(".concat(this.subMenuOffset,"%)")}},{key:"toggleContentScroll",value:function(){this.menuContent.classList.toggle("side-menu__content--sub-opened")}},{key:"closeSubMenu",value:function(){var n=this;this.subMenuOffset=0,this.menuContent.style.overflowY="hidden",this.translateX();this.sideMenuInner.addEventListener(this.transitionEndEvent,function e(){n.sideMenuInner.removeEventListener(n.transitionEndEvent,e),n.sideMenuContainer.querySelectorAll(".".concat(n.menuItemOpenClass)).forEach(function(e){e.classList.remove(n.menuItemOpenClass)}),n.sideMenuInner.style.height=n.sideMenuInnerHeight,n.menuContent.style.overflowY="visible"})}},{key:"toggleSubMenu",value:function(e){var n=this;this.menuContent.style.overflowY="hidden",_toConsumableArray(this.sideMenuContainer.querySelectorAll(".".concat(this.menuItemOpenClass))).forEach(function(e){e.classList.remove(n.menuItemOpenClass)}),e.currentTarget.classList.add(this.menuItemOpenClass),this.subMenuOffset=100,this.sideMenuInner.style.height=this.getSubmenuHeight(e.currentTarget.nextElementSibling),this.toggleContentScroll(),this.menuContent.scrollTop=0,this.translateX();this.sideMenuInner.addEventListener(this.transitionEndEvent,function e(){n.sideMenuInner.removeEventListener(n.transitionEndEvent,e),n.menuContent.style.overflowY="auto"})}},{key:"setListeners",value:function(){var n=this;this.menuTrigger.forEach(function(e){e.addEventListener("click",function(){n.toggleSideMenu()})}),this.subMenuOverlay.addEventListener("click",function(){n.toggleSideMenu(),n.toggleContentScroll()}),this.menuBack.forEach(function(e){e.addEventListener("click",function(){n.closeSubMenu()})}),this.menuItem.forEach(function(e){e.addEventListener("click",function(e){n.toggleSubMenu(e)})})}},{key:"setTransitionEndEvent",value:function(){void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(this.transitionEndEvent="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(this.transitionEndEvent="webkitAnimationEnd")}},{key:"init",value:function(){this.sideMenuInnerHeight=this.getSubmenuHeight(this.sideMenuInner),this.setTransitionEndEvent(),this.setListeners()}}]),e}()});